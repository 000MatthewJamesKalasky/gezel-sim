RUN=pb.fdl
CYCLES=1000
RECEIVER=RECEIVER
SENDER=SENDER
PB_OBJ=$(SENDER).DEC $(RECEIVER).DEC

%.DEC: %.psm
	wine /opt/KCPSM3/Assembler/KCPSM3.EXE $<

all: $(PB_OBJ)

sim: $(PB_OBJ) $(RUN)
	$(GPLATFORM) -c $(CYCLES) $(RUN)

clean:
	rm -f *~ PASS*.DAT LABELS.TXT CONSTANT.TXT *.DEC *.FMT *.HEX *.LOG *.M *.MEM \
$(SENDER).COE $(SENDER).V $(SENDER).VHD \
$(RECEIVER).COE $(RECEIVER).V $(RECEIVER).VHD

